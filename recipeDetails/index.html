<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Chinese Dumplings Recipe</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://ytbfokayjuwdovzygubt.supabase.co/';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0YmZva2F5anV3ZG92enlndWJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NTMyNDAsImV4cCI6MjA3NjAyOTI0MH0.lZv12D29lHDWYvmmolZbGBjuB6JMwdZB1SVIE52YmVg';
        const db = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>
</head>

<body id="my-body">
    <div id="title" class="title">
        <h1></h1>
    </div>
    <hr id="divider">
    <div id="subtitle" class="difficulty">
        <h3>Difficulty level: Easy | Total Time: 15 min | stars</h3>
    </div>

    <div id="recipe-image" class="dumplings-container1">
        <img src="../Images/Dumplings.JPG" alt="Chinese Dumplings image">
    </div>

    <div id="ingredients" class="ingredients">
        <h2>Ingredients:</h2>
    </div>

    <div id="steps" class="steps">
        <h2>Step-by-step Instructions</h2>
    </div>

</body>
<script>
    async function getRecipe() {
        const urlParams = new URLSearchParams(window.location.search);
        const recipeId = urlParams.get('id');
        const recipe = await db
            .from('Recipes')
            .select('*')
            .eq('id', recipeId);
        if (recipe.error) {
            console.error(recipe.error);
        } else {
            console.log('Recipe:', recipe.data[0]);
            document.getElementById('title').innerHTML = `<h1>${recipe.data[0].title}</h1>`;
            document.getElementById('subtitle').innerHTML = `<h3> Difficulty level: ${recipe.data[0].difficulty} | Total Time: ${recipe.data[0].time}</h3>`;
            document.getElementById('recipe-image').innerHTML = `<img src="${recipe.data[0].image}" alt="${recipe.data[0].title} image">`;
            const steps = document.createElement('p');
            steps.innerHTML = `<p>${recipe.data[0].steps}</p>`;
            document.getElementById('steps').appendChild(steps);
            for (const ingredient of recipe.data[0].ingredients) {
                const label = document.createElement('label');
                label.innerHTML = `
                    <input type="checkbox">
                    <span>${ingredient}</span>
                `;
                document.getElementById('ingredients').appendChild(label);
            }
        }
    }
    getRecipe();
</script>

</html>