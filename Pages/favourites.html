<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../allRecipes/styles.css">
    <title>Liked Recipes</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://ytbfokayjuwdovzygubt.supabase.co/';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0YmZva2F5anV3ZG92enlndWJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NTMyNDAsImV4cCI6MjA3NjAyOTI0MH0.lZv12D29lHDWYvmmolZbGBjuB6JMwdZB1SVIE52YmVg';
        const db = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
    </script>
</head>

<body>
    <a href="../HomePage/index.html"><img class="home-button" src="../Images/home.png" alt=""></a>

    <div class="sidebar">
        <h3 class="sidebar-title" href="#">Menu Bar</h3>
        <a href="../allRecipes/index.html">All Recipes</a>
        <a href="../myAccount/index.html">My Account</a>
        <a href="../myRecipes/index.html">My Recipes</a>
    </div>

    <div class="searchbar">
        <div class="search-container">
            <form action="/action_page.php">
                <input type="text" placeholder="Search.." name="search">
            </form>
        </div>
    </div>

    <div class="content">
        <div class="header">
            <h1>
                Liked Recipes
            </h1>
            <div id="recipe-container" class="recipe-container">

            </div>
        </div>
</body>
<script>
    async function fetchRecipes() {
        const { data, error } = await db
            .from('Favorites')
            .select('*, Recipes(*)');

        if (error) {
            console.error('Error fetching recipes:', error);
        } else {
            console.log('Recipes:', data);
            // You can add code here to dynamically display recipes on the homepage
            const recipeContainer = document.getElementById('recipe-container');
            recipeContainer.innerHTML = ''; // Clear existing content
            data.forEach(recipe => {
                const recipeDiv = document.createElement('div');
                recipeDiv.className = 'dumplings-container';
                recipeDiv.innerHTML = `
                    <a href="../recipeDetails/index.html?id=${recipe.recipe_id}">
                        <img src="${recipe.Recipes.image}" alt="${recipe.Recipes.title} image">
                    </a>
                    <h4>${recipe.Recipes.title}</h4>
                `;
                recipeContainer.appendChild(recipeDiv);
            });
        }
    }
    fetchRecipes();
</script>

</html>